<!DOCTYPE html>
<!--[if lte IE 8 ]>
<html class="ie" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<!--
***************  *      *     *
      8          *    *       *
      8          *  *         *
      8          **           *
      8          *  *         *
      8          *    *       *
      8          *      *     *
      8          *        *   ***********    -----Theme By Kieran(http://go.kieran.top)
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<!--<![endif]-->

<head>
  <title>php进阶笔记一 | Zohar&#39;s Blog</title>
  <!-- Meta data -->
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="Zohar's Blog">
    <meta name="author" content="Zohar">
    <meta name="description" content="" />
    <meta name="keywords" content="" />

    <!-- Favicon, (keep icon in root folder) -->
    <link rel="Shortcut Icon" href="/img/favicon.ico" type="image/ico">

    <link rel="alternate" href="/atom.xml" title="Zohar&#39;s Blog" type="application/atom+xml">
    <link rel="stylesheet" href="/css/all.css" media="screen" type="text/css">
	
    <link rel="stylesheet" href="/highlightjs/vs.css" type="text/css">
    
    

    <!-- Custom stylesheet, (add custom styles here, always load last) -->
    <!-- Load our stylesheet for IE8 -->
    <!--[if IE 8]>
    <link rel="stylesheet" type="text/css" href="/css/ie8.css" />
    <![endif]-->

    <!-- Google Webfonts (Monserrat 400/700, Open Sans 400/600) -->
    <link href='/css/Montserrat-400-700.css' rel='stylesheet' type='text/css'>
    <link href='/css/Open+Sans-400-600.css' rel='stylesheet' type='text/css'>

    <!-- Load our fonts individually if IE8+, to avoid faux bold & italic rendering -->
    <!--[if IE]>
    <link href='http://fonts.useso.com/css?family=Montserrat:400' rel='stylesheet' type='text/css'>
    <link href='http://fonts.useso.com/css?family=Montserrat:700' rel='stylesheet' type='text/css'>
    <link href='http://fonts.useso.com/css?family=Open+Sans:400' rel='stylesheet' type='text/css'>
    <link href='http://fonts.useso.com/css?family=Open+Sans:600' rel='stylesheet' type='text/css'>
    <![endif]-->

    <!-- jQuery | Load our jQuery, with an alternative source fallback to a local version if request is unavailable -->
    <script src="/js/jquery-1.11.1.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/jquery-1.11.1.min.js"><\/script>')</script>

    <!-- Load these in the <head> for quicker IE8+ load times -->
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="/js/html5shiv.min.js"></script>
    <script src="/js/respond.min.js"></script>
    <![endif]-->










  
  
  

  
  <style>.col-md-8.col-md-offset-2.opening-statement img{display:none;}</style>
</head>

<!--
<body class="post-template">
-->
<body id="index" class="lightnav animsition">

      <!-- ============================ Off-canvas navigation =========================== -->

    <div class="sb-slidebar sb-right sb-style-overlay sb-momentum-scrolling">
        <div class="sb-close" aria-label="Close Menu" aria-hidden="true">
            <img src="/img/close.png" alt="Close"/>
        </div>
        <!-- Lists in Slidebars -->
        <ul class="sb-menu">
            <li><a href="/" class="animsition-link" title="Home">Home</a></li>
            <li><a href="/archives" class="animsition-link" title="archive">archives</a></li>
            <!-- Dropdown Menu -->
			 
            
        	<li>
        		<a class="sb-toggle-submenu">Categories<span class="sb-caret"></span></a>
            	<ul class="sb-submenu">
				  	
				    <li><a href="/categories/CSS相关/" class="animsition-link">CSS相关<small>(10)</small></a></li>
				    
				    <li><a href="/categories/HTTP/" class="animsition-link">HTTP<small>(1)</small></a></li>
				    
				    <li><a href="/categories/JavaScript/" class="animsition-link">JavaScript<small>(27)</small></a></li>
				    
				    <li><a href="/categories/Laravel/" class="animsition-link">Laravel<small>(3)</small></a></li>
				    
				    <li><a href="/categories/MySql/" class="animsition-link">MySql<small>(1)</small></a></li>
				    
				    <li><a href="/categories/PHP/" class="animsition-link">PHP<small>(4)</small></a></li>
				    
				    <li><a href="/categories/vue/" class="animsition-link">vue<small>(1)</small></a></li>
				    
				    <li><a href="/categories/其他/" class="animsition-link">其他<small>(1)</small></a></li>
				    
				    <li><a href="/categories/JavaScript/求职/" class="animsition-link">求职<small>(2)</small></a></li>
				    
				    <li><a href="/categories/生活/" class="animsition-link">生活<small>(1)</small></a></li>
				    
				    <li><a href="/categories/百度前端技术学院/" class="animsition-link">百度前端技术学院<small>(1)</small></a></li>
				    
				</ul>
        	</li>
			
            
            <li>
                <a class="sb-toggle-submenu">Links<span class="sb-caret"></span></a>
                <ul class="sb-submenu">
                    
                    <li><a href="http://go.kieran.top/" class="animsition-link">Kieran</a></li>
                    
                    <li><a href="http://blog.jeongen.com/" class="animsition-link">jeongen</a></li>
                    
                </ul>
            </li>
            
        </ul>
        <!-- Lists in Slidebars -->
        <ul class="sb-menu secondary">
            <li><a href="/about.html" class="animsition-link" title="about">About</a></li>
            <li><a href="/atom.xml" class="animsition-link" title="rss">RSS</a></li>
        </ul>
    </div>
    
    <!-- ============================ END Off-canvas navigation =========================== -->

    <!-- ============================ #sb-site Main Page Wrapper =========================== -->

    <div id="sb-site">
        <!-- #sb-site - All page content should be contained within this id, except the off-canvas navigation itself -->

        <!-- ============================ Header & Logo bar =========================== -->

        <div id="navigation" class="navbar navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <!-- Nav logo -->
                    <div class="logo">
                        <a href="/" title="Logo" class="animsition-link">
                         <img src="/img/logo.png" alt="Logo" width="35px;"/> 
                        </a>
                    </div>
                    <!-- // Nav logo -->
                    <!-- Info-bar -->
                    <nav>
                        <ul class="nav">
                            <li><a href="/" class="animsition-link">Zohar's Blog</a></li>
                            <li class="nolink"><span>Always </span>Creative.</li>
                            
                            <li><a href="https://github.com/Zohar727" title="Github" target="_blank"><i class="icon-github"></i></a></li>
                            
                            
                            <li><a href="https://twitter.com/" title="Twitter" target="_blank"><i class="icon-twitter"></i></a></li>
                            
                            
                            <li><a href="https://www.facebook.com/" title="Facebook" target="_blank"><i class="icon-facebook"></i></a></li>
                            
                            
                            <li><a href="https://google.com/" title="Google-Plus" target="_blank"><i class="icon-google-plus"></i></a></li>
                            
                            
                            <li><a href="http://weibo.com/" title="Sina-Weibo" target="_blank"><i class="icon-sina-weibo"></i></a></li>
                            
                            <li class="nolink"><span>Welcome!</span></li>
                        </ul>
                    </nav>
                    <!--// Info-bar -->
                </div>
                <!-- // .container -->
                <div class="learnmore sb-toggle-right">More</div>
                <button type="button" class="navbar-toggle menu-icon sb-toggle-right" title="More">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar before"></span>
                <span class="icon-bar main"></span>
                <span class="icon-bar after"></span>
                </button>
            </div>
            <!-- // .navbar-inner -->
        </div>

        <!-- ============================ Header & Logo bar =========================== -->


      
<section id="intro">
    <div class="container">
        <div class="row col-md-offset-2">
            <div class="col-md-8">
    			<span class="post-meta">
      <time datetime="2018-03-12T08:48:12.000Z" itemprop="datePublished">
          2018-03-12
      </time>
    
    
    | 
    <a href='/tags/PHP/'>PHP</a>,
    
    <a href='/tags/后端开发/'>后端开发</a>
    
    
</span>
                <h1>php进阶笔记一</h1>
            </div>
        </div>
        <div class="col-md-8 col-md-offset-2">
      		<h3 id="PHP数组"><a href="#PHP数组" class="headerlink" title="PHP数组"></a>PHP数组</h3><h4 id="创建数组"><a href="#创建数组" class="headerlink" title="创建数组"></a>创建数组</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$arr = array()</div></pre></td></tr></table></figure>
<h4 id="索引数组与关联数组"><a href="#索引数组与关联数组" class="headerlink" title="索引数组与关联数组"></a>索引数组与关联数组</h4><h5 id="索引数组"><a href="#索引数组" class="headerlink" title="索引数组"></a>索引数组</h5><p>索引数组是指数组的键是整数的数组，并且键的整数顺序是从0开始，依次类推。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$arr = array(&apos;0&apos; =&gt; &apos;苹果&apos;);</div></pre></td></tr></table></figure></p>
<ul>
<li><p>索引数组的三种赋值方式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$arr[0] = &apos;苹果&apos;;</div><div class="line">$arr = array(&apos;0&apos; =&gt; &apos;苹果&apos;);</div><div class="line">$arr = array(&apos;苹果&apos;);</div></pre></td></tr></table></figure>
</li>
<li><p>foreach循环取值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">foreach($arr as $k =&gt; $v) // 同时取下标和值</div><div class="line">foreach($arr as $v) // 只取值</div></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="关联数组"><a href="#关联数组" class="headerlink" title="关联数组"></a>关联数组</h5><p>关联数组是指数组的键是字符串的数组。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$arr = array(&apos;apple&apos; =&gt; &apos;苹果&apos;)</div></pre></td></tr></table></figure></p>
<ul>
<li>关联数组的两种赋值方式<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$arr = array(&apos;apple&apos; =&gt; &apos;苹果&apos;);</div><div class="line">$arr[&apos;apple&apos;] = &apos;苹果&apos;;</div></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h3 id="PHP类和对象"><a href="#PHP类和对象" class="headerlink" title="PHP类和对象"></a>PHP类和对象</h3><h4 id="类的定义与实例对象"><a href="#类的定义与实例对象" class="headerlink" title="类的定义与实例对象"></a>类的定义与实例对象</h4><h5 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">//定义一个类</div><div class="line">class Car &#123;</div><div class="line">    //定义属性</div><div class="line">    public $name = &apos;汽车&apos;;</div><div class="line"></div><div class="line">    //定义方法</div><div class="line">    public function getName() &#123;</div><div class="line">        //方法内部可以使用$this伪变量调用对象的属性或者方法</div><div class="line">        return $this-&gt;name;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="创建类的实例"><a href="#创建类的实例" class="headerlink" title="创建类的实例"></a>创建类的实例</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$car = new Car();</div><div class="line">//也可以采用变量来创建</div><div class="line">$className = &apos;Car&apos;;</div><div class="line">$car = new $className();</div></pre></td></tr></table></figure>
<h5 id="类的静态方法与静态关键字"><a href="#类的静态方法与静态关键字" class="headerlink" title="类的静态方法与静态关键字"></a>类的静态方法与静态关键字</h5><p>使用static修饰，不需要实例化可直接调用，操作符为::<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">class Car &#123;</div><div class="line">    private static $name = &apos;汽车&apos;;</div><div class="line">    public static function getName() &#123;</div><div class="line">        return self::$name;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">echo Car::getName(); // 汽车</div></pre></td></tr></table></figure></p>
<p>静态方法中，$this伪变量不允许使用。可以使用self，parent，static在内部调用静态方法与属性。</p>
<h5 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h5><p>使用<code>__construct</code>定义构造函数，构造函数一般在对象创建时调用，通常用来进行一些初始化工作;<br>当子类定义了构造函数后，<strong>不会调用父类的构造函数</strong>，需要显式的调用<code>parent::__construct()</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">class Car &#123;</div><div class="line">   function __construct() &#123;</div><div class="line">       print &quot;父类构造函数被调用\n&quot;;</div><div class="line">   &#125;</div><div class="line">&#125;</div><div class="line">class Truck extends Car &#123;</div><div class="line">   function __construct() &#123;</div><div class="line">       print &quot;子类构造函数被调用\n&quot;;</div><div class="line">       parent::__construct();</div><div class="line">   &#125;</div><div class="line">&#125;</div><div class="line">$car = new Truck();</div></pre></td></tr></table></figure></p>
<p>如果构造函数定义成了私有方法，则不允许直接实例化对象了，这时候一般通过静态方法进行实例化，在设计模式中会经常使用这样的方法来控制对象的创建，比如单例模式只允许有一个全局唯一的对象。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">class Car &#123;</div><div class="line">    private function __construct() &#123;</div><div class="line">        echo &apos;object create&apos;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private static $_object = null;</div><div class="line">    public static function getInstance() &#123;</div><div class="line">        if (empty(self::$_object)) &#123;</div><div class="line">            self::$_object = new Car(); //内部方法可以调用私有方法，因此这里可以创建对象</div><div class="line">        &#125;</div><div class="line">        return self::$_object;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">//$car = new Car(); //这里不允许直接实例化对象</div><div class="line">$car = Car::getInstance(); //通过静态方法来获得一个实例</div></pre></td></tr></table></figure></p>
<h5 id="析构函数"><a href="#析构函数" class="headerlink" title="析构函数"></a>析构函数</h5><p>使用<code>__destruct</code>定义<br>当创建的对象的所有引用被删除时，会自动调用析构函数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">class Car &#123;</div><div class="line">   function __construct() &#123;</div><div class="line">       print &quot;构造函数被调用 \n&quot;;</div><div class="line">   &#125;</div><div class="line">   function __destruct() &#123;</div><div class="line">       print &quot;析构函数被调用 \n&quot;;</div><div class="line">   &#125;</div><div class="line">&#125;</div><div class="line">$car = new Car(); //实例化时会调用构造函数</div><div class="line">echo &apos;使用后，准备销毁car对象 \n&apos;;</div><div class="line">unset($car); //销毁时会调用析构函数</div></pre></td></tr></table></figure></p>
<h5 id="重载"><a href="#重载" class="headerlink" title="重载"></a>重载</h5><p>PHP中的重载指的是动态的创建属性与方法<br>属性的重载通过<strong>set，</strong>get，<strong>isset，</strong>unset来分别实现对不存在属性的赋值、读取、判断属性是否设置、销毁属性。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">class Car &#123;</div><div class="line">    private $ary = array();</div><div class="line">    </div><div class="line">    public function __set($key, $val) &#123;</div><div class="line">        $this-&gt;ary[$key] = $val;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    public function __get($key) &#123;</div><div class="line">        if (isset($this-&gt;ary[$key])) &#123;</div><div class="line">            return $this-&gt;ary[$key];</div><div class="line">        &#125;</div><div class="line">        return null;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    public function __isset($key) &#123;</div><div class="line">        if (isset($this-&gt;ary[$key])) &#123;</div><div class="line">            return true;</div><div class="line">        &#125;</div><div class="line">        return false;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    public function __unset($key) &#123;</div><div class="line">        unset($this-&gt;ary[$key]);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">$car = new Car();</div><div class="line">$car-&gt;name = &apos;汽车&apos;;  //name属性动态创建并赋值</div><div class="line">echo $car-&gt;name;</div></pre></td></tr></table></figure></p>
<p>方法的重载通过<code>__call</code>来实现，当调用不存在的方法的时候，将会转为参数调用<strong>call方法，当调用不存在的静态方法时会使用`</strong>callStatic`重载。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">class Car &#123;</div><div class="line">    public $speed = 0;</div><div class="line">    </div><div class="line">    public function __call($name, $args) &#123;</div><div class="line">        if ($name == &apos;speedUp&apos;) &#123;</div><div class="line">            $this-&gt;speed += 10;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">$car = new Car();</div><div class="line">$car-&gt;speedUp(); //调用不存在的方法会使用重载</div><div class="line">echo $car-&gt;speed;</div></pre></td></tr></table></figure></p>
<h5 id="类与对象的高级特性"><a href="#类与对象的高级特性" class="headerlink" title="类与对象的高级特性"></a>类与对象的高级特性</h5><ul>
<li>对象比较<br><code>==</code>：判断两个实例的所有属性相等<br><code>===</code>：判断两个变量是否为同一个对象的引用</li>
<li>对象复制<br><code>clone</code>方法复制对象</li>
<li>对象序列化与反序列化<br><code>serialize()</code>序列化为字符串<br><code>unserialize()</code>反序列化为对象</li>
</ul>
<hr>
<h3 id="PHP正则函数"><a href="#PHP正则函数" class="headerlink" title="PHP正则函数"></a>PHP正则函数</h3><p><code>preg_match( $pattern , $subject , $matches)</code><br><strong>参数 ：</strong></p>
<ul>
<li>pattern : 要搜索的模式，字符串类型(正则表达式)。</li>
<li>subject : 输入的字符串。</li>
<li>matches :（可有可无）如果提供了参数matches，它将被填充为搜索结果。$matches[0]将包含完整模式匹配到的文本， $matches[1]将包含第一个捕获子组匹配到的文本，以此类推。<br></li>
</ul>
<p><strong>返回值 ：</strong><br>preg_match()返回 pattern 的匹配次数。 它的值将是0次（不匹配）或1次，因为preg_match()在第一次匹配后 将会停止搜索。preg_match_all()不同于此，它会一直搜索subject 直到到达结尾。 如果发生错误preg_match()返回 FALSE  </p>
<p><code>preg_match_all()</code><br>preg_match_all可以循环获取一个列表的匹配结果数组。</p>
<h5 id="分割符"><a href="#分割符" class="headerlink" title="分割符"></a>分割符</h5><p>常用三种：<code>/  #   ~</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">/foo bar/</div><div class="line">#^[^0-9]$#</div><div class="line">~php~</div></pre></td></tr></table></figure></p>
<h5 id="正则替换"><a href="#正则替换" class="headerlink" title="正则替换"></a>正则替换</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">preg_repalce($pattern,$replacement,$string)</div><div class="line"></div><div class="line">// eg</div><div class="line">$string = &apos;April 15, 2014&apos;;</div><div class="line">$pattern = &apos;/(\w+) (\d+), (\d+)/i&apos;;</div><div class="line">$replacement = &apos;$3, $&#123;1&#125; $2&apos;;</div><div class="line">echo preg_replace($pattern, $replacement, $string); //结果为：2014, April 15</div></pre></td></tr></table></figure>
<h5 id="正则常用案例"><a href="#正则常用案例" class="headerlink" title="正则常用案例"></a>正则常用案例</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">$user = array(</div><div class="line">    &apos;name&apos; =&gt; &apos;spark1985&apos;,</div><div class="line">    &apos;email&apos; =&gt; &apos;spark@imooc.com&apos;,</div><div class="line">    &apos;mobile&apos; =&gt; &apos;13312345678&apos;</div><div class="line">);</div><div class="line">//进行一般性验证</div><div class="line">if (empty($user)) &#123;</div><div class="line">    die(&apos;用户信息不能为空&apos;);</div><div class="line">&#125;</div><div class="line">if (strlen($user[&apos;name&apos;]) &lt; 6) &#123;</div><div class="line">    die(&apos;用户名长度最少为6位&apos;);</div><div class="line">&#125;</div><div class="line">//用户名必须为字母、数字与下划线</div><div class="line">if (!preg_match(&apos;/^\w+$/i&apos;, $user[&apos;name&apos;])) &#123;</div><div class="line">    die(&apos;用户名不合法&apos;);</div><div class="line">&#125;</div><div class="line">//验证邮箱格式是否正确</div><div class="line">if (!preg_match(&apos;/^[\w\.]+@\w+\.\w+$/i&apos;, $user[&apos;email&apos;])) &#123;</div><div class="line">    die(&apos;邮箱不合法&apos;);</div><div class="line">&#125;</div><div class="line">//手机号必须为11位数字，且为1开头</div><div class="line">if (!preg_match(&apos;/^1\d&#123;10&#125;$/i&apos;, $user[&apos;mobile&apos;])) &#123;</div><div class="line">    die(&apos;手机号不合法&apos;);</div><div class="line">&#125;</div><div class="line">echo &apos;用户信息验证成功&apos;;</div></pre></td></tr></table></figure>
<hr>
<h3 id="PHP会话控制-cookie与session"><a href="#PHP会话控制-cookie与session" class="headerlink" title="PHP会话控制(cookie与session)"></a>PHP会话控制(cookie与session)</h3><h4 id="设置cookie"><a href="#设置cookie" class="headerlink" title="设置cookie"></a>设置cookie</h4><ul>
<li><code>setcookie</code><br><strong>五个常用参数：</strong></li>
</ul>
<ol>
<li>name（ Cookie名）可以通过$_COOKIE[‘name’] 进行访问</li>
<li>value（Cookie的值）</li>
<li>expire（过期时间）Unix时间戳格式，默认为0，表示浏览器关闭即失效</li>
<li>path（有效路径）如果路径设置为’/‘，则整个网站都有效</li>
<li>domain（有效域）默认整个域名都有效，如果设置了’www.imooc.com’,则只在www子域中有效</li>
<li>secure 设置cookie在https传输，默认false</li>
<li>httponly 是否只使用http访问cookie，默认false，如果为true，则js无法操作cookie，防止xss</li>
</ol>
<ul>
<li><p><code>setrawcookie</code><br>setrawcookie跟setcookie基本一样，唯一的不同就是value值不会自动的进行urlencode，因此在需要的时候要手动的进行urlencode。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">setrawcookie(&apos;cookie_name&apos;, rawurlencode($value), time()+60*60*24*365);</div></pre></td></tr></table></figure>
</li>
<li><p><code>header(&quot;Set-Cookie:cookie_name=value&quot;);</code><br>因为Cookie是通过HTTP标头进行设置的，所以也可以直接使用header方法进行设置。</p>
</li>
</ul>
<h4 id="删除cookie"><a href="#删除cookie" class="headerlink" title="删除cookie"></a>删除cookie</h4><ul>
<li><code>setcookie(&#39;test&#39;, &#39;&#39;, time()-1);</code></li>
<li><code>header(&quot;Set-Cookie:test=1393832059; expires=&quot;.gmdate(&#39;D, d M Y H:i:s \G\M\T&#39;, time()-1));</code><blockquote>
<p>更新和删除时要保证$path和$domain和之前保持一致</p>
</blockquote>
</li>
</ul>
<h4 id="session工作流程"><a href="#session工作流程" class="headerlink" title="session工作流程"></a>session工作流程</h4><ol>
<li>准备会话的时候，PHP会先查看请求中是否包含session_id，如果没有服务器会生成一个session_id</li>
<li>服务器会把这个session_id发送到浏览器保存， 一般浏览器会把id存在cookie中</li>
<li>之后每次浏览器再去范文服务器时，都会携带cookie中存储的session_id，这样服务器就认识这个浏览器</li>
<li>服务器端这个session_id可以存放任意的会话数据，这些数据时经历过序列化存放进去的</li>
<li>每次浏览器访问服务器，都可以凭借自己的session_id到服务器的这个变量中认领自己的信息</li>
<li>如果想销毁会话，可以删除会话中的数据，销毁会话文件</li>
</ol>
<h4 id="使用session"><a href="#使用session" class="headerlink" title="使用session"></a>使用session</h4><ol>
<li>执行<code>session_start()</code>开启seesion</li>
<li><code>$_SESSION</code>进行session读写<blockquote>
<p>session会自动的对要设置的值进行encode与decode，因此session可以支持任意数据类型，包括数据与对象等。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">session_start();</div><div class="line">$_SESSION[&apos;ary&apos;] = array(&apos;name&apos; =&gt; &apos;jobs&apos;);</div><div class="line">$_SESSION[&apos;obj&apos;] = new stdClass();</div><div class="line">var_dump($_SESSION);</div></pre></td></tr></table></figure>
</blockquote>
</li>
</ol>
<h4 id="删除销毁session"><a href="#删除销毁session" class="headerlink" title="删除销毁session"></a>删除销毁session</h4><ul>
<li><p>将`$_SESSION 清空</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$_SESSION = [];</div></pre></td></tr></table></figure>
</li>
<li><p>删除单个session<br>使用<code>unset()</code>方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">session_start();</div><div class="line">$_SESSION[&apos;name&apos;] = &apos;jobs&apos;;</div><div class="line">unset($_SESSION[&apos;name&apos;]);</div><div class="line">echo $_SESSION[&apos;name&apos;]; //提示name不存在</div></pre></td></tr></table></figure>
</li>
<li><p>删除所有session<br>使用<code>session_destory()</code>方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">session_start();</div><div class="line">$_SESSION[&apos;name&apos;] = &apos;jobs&apos;;</div><div class="line">$_SESSION[&apos;time&apos;] = time();</div><div class="line">session_destroy();</div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>注意：值得注意的是，session_destroy并不会立即的销毁全局变量$_SESSION中的值，只有当下次再访问的时候，$_SESSION才为空，因此如果需要立即销毁$_SESSION，可以使用unset函数。</p>
</blockquote>
<ul>
<li>常用session方法<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">// 获取session的名字</div><div class="line">session_name() </div><div class="line">// 获取session_id</div><div class="line">session_id()</div></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h4 id="PHP文件系统"><a href="#PHP文件系统" class="headerlink" title="PHP文件系统"></a>PHP文件系统</h4><h5 id="读取文件"><a href="#读取文件" class="headerlink" title="读取文件"></a>读取文件</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">file_get_contents()</div><div class="line">// 返回字符串</div></pre></td></tr></table></figure>
<h5 id="判断文件"><a href="#判断文件" class="headerlink" title="判断文件"></a>判断文件</h5><ul>
<li><p>是否存在</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">// is_file是确切的判断给定的路径是否是一个文件</div><div class="line">is_file()</div><div class="line">// file_exists不仅可以判断文件是否存在，同时也可以判断目录是否存在</div><div class="line">file_exists()</div></pre></td></tr></table></figure>
</li>
<li><p>是否可读</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">is_readable()</div></pre></td></tr></table></figure>
</li>
<li><p>是否可写</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">is_writeable()</div></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="获得文件属性"><a href="#获得文件属性" class="headerlink" title="获得文件属性"></a>获得文件属性</h5><ul>
<li><p>文件所有者</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fileowner()</div></pre></td></tr></table></figure>
</li>
<li><p>文件创建时间</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">filectime()</div></pre></td></tr></table></figure>
</li>
<li><p>文件修改时间</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">filemtime()</div></pre></td></tr></table></figure>
</li>
<li><p>文件访问时间</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fileatime()</div></pre></td></tr></table></figure>
</li>
<li><p>文件大小</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">filesize()</div></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="写入内容至文件"><a href="#写入内容至文件" class="headerlink" title="写入内容至文件"></a>写入内容至文件</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">file_put_contents($filename, $data)</div></pre></td></tr></table></figure>
<h5 id="删除文件"><a href="#删除文件" class="headerlink" title="删除文件"></a>删除文件</h5><ul>
<li><p>删除单个文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">unlink($filename)</div></pre></td></tr></table></figure>
</li>
<li><p>删除文件夹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">rmdir($dir) // 文件夹必须为空</div><div class="line"></div><div class="line">// 文件夹不为空时，可以循环删除文件再删除文件夹</div><div class="line">foreach (glob(&quot;*&quot;) as $filename) &#123;</div><div class="line">   unlink($filename);</div><div class="line">&#125;</div><div class="line">rmdir($dir);</div></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h3 id="PHP异常处理"><a href="#PHP异常处理" class="headerlink" title="PHP异常处理"></a>PHP异常处理</h3><h4 id="Exception异常处理类"><a href="#Exception异常处理类" class="headerlink" title="Exception异常处理类"></a>Exception异常处理类</h4><p>Exception具有几个基本属性与方法，其中包括了：</p>
<ul>
<li>message 异常消息内容</li>
<li>code 异常代码</li>
<li>file 抛出异常的文件名</li>
<li>line 抛出异常在该文件的行数</li>
</ul>
<p>其中常用的方法有：</p>
<ul>
<li>getTrace 获取异常追踪信息</li>
<li>getTraceAsString 获取异常追踪信息的字符串</li>
<li>getMessage 获取出错信息</li>
<li>getLine 获取异常行号</li>
<li>getFile 获取异常文件</li>
</ul>

            <div class="clearfix"></div>
            <hr class="nogutter">
        </div>
        <nav class="pagination" role="pagination">
    
    <a class="pull-left" href="/2018/03/14/php进阶笔记二/" style="float: left;">
        ← php进阶笔记二
    </a>
    
    
    <a class="pull-right" href="/2018/03/08/php与mysql数据库/">
        php与mysql数据库 →
    </a>
    
</nav>

        <div class="duoshuo"></div>
    </div>
</section>


      
<!-- ============================ Footer =========================== -->

<footer>
    <div class="container">
            <div class="copy">
             <p>
                    &copy; 2014<script>new Date().getFullYear()>2010&&document.write("-"+new Date().getFullYear());</script>, Content By Zohar. All Rights Reserved.
                </p>

            </div>
            <div class="social">
                <ul>
                    
                    <li><a href="https://github.com/Zohar727" title="Github" target="_blank"><i class="icon-github"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="https://twitter.com/" title="Twitter" target="_blank"><i class="icon-twitter"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="https://www.facebook.com/" title="Facebook" target="_blank"><i class="icon-facebook"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="https://google.com/" title="Google-Plus" target="_blank"><i class="icon-google-plus"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="http://weibo.com/" title="Sina-Weibo" target="_blank"><i class="icon-sina-weibo"></i></a>&nbsp;</li>
                    
                </ul>
                <div class="coding">
                    <img src="https://dn-coding-net-production-static.qbox.me/static/ca94f7abde90327b683f1eb5f01a81b7.svg" height="40">
                </div>
            </div>
            <div class="clearfix"> </div>
        </div>
</footer>

<!-- ============================ END Footer =========================== -->
      <!-- Load our scripts -->
        
<!-- Resizable 'on-demand' full-height hero -->
<script type="text/javascript">
    
    var resizeHero = function () {
        var hero = $(".cover,.heightblock"),
            window1 = $(window);
        hero.css({
            "height": window1.height()
        });
    };
    
    resizeHero();
    
    $(window).resize(function () {
        resizeHero();
    });
</script>
<script src="/js/plugins.min.js"></script><!-- Bootstrap core and concatenated plugins always load here -->
<script src="/js/jquery.flexslider-min.js"></script><!-- Flexslider plugin -->
<script src="/js/scripts.js"></script><!-- Theme scripts -->

<!-- Initiate flexslider plugin -->
<script type="text/javascript">
    $(document).ready(function($) {
      $('.flexslider').flexslider({
        animation: "fade",
        prevText: "",
        nextText: "",
        directionNav: true
      });
    });
</script>

</body>
</html>
